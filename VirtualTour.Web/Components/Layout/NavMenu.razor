@using MudBlazor
@using Microsoft.AspNetCore.Components.Authorization
@using VirtualTour.Web.Components.BaseComponents
@inject NavigationManager Navigation
@inject IJSRuntime JS
<style>
    .sidebar-full-height .mud-nav-link-text,
    .sidebar-full-height .mud-nav-link-icon,
    .sidebar-full-height .mud-nav-group-title {
        color: #c2c7d0 !important;
    }
     .sidebar-full-height .mud-nav-link:hover {
        background-color: ghostwhite; /* adjust as needed */
    }
    .sidebar-full-height .mud-nav-link:hover .mud-nav-link-text,
    .sidebar-full-height .mud-nav-link:hover .mud-nav-link-icon,
    .sidebar-full-height .mud-nav-link:hover .mud-nav-group-title {
        color: #3b3b3b !important;
    }
     .custom-active {
        background-color: ghostwhite !important;
    }
    .custom-active .mud-nav-link-text,
    .custom-active .mud-nav-link-icon,
    .custom-active .mud-nav-group-title {
        color: #3b3b3b !important;
    }

    .login {
        cursor: pointer;
        color: inherit;
    }

        .login:hover {
            color: #ED6C02; /* MudBlazor default warning color */
        }
</style>

<MudPaper Width="250px" Class="py-4 sidebar-full-height" Elevation="0"
          Style="background-color: #0b0b0b; height: 100vh; overflow-y: auto;border-radius: 0;">
            <div style="display: flex; flex-direction: column; height: 100%;">
        <div style="text-align: center;" class="mb-3">
            <MudImage Style="cursor:pointer;" Src="logo.png" @onclick="NavigateToHome" Width="240" Height="140" />
        </div>
    <MudNavMenu >
            
            <PermissionView Permission="Admin.View">
                <MudNavLink Href="/admin" Icon="@Icons.Material.Filled.Dashboard" ActiveClass="custom-active" Match="NavLinkMatch.All">
                    Dashboard
                </MudNavLink>

                <PermissionView Permission="Users.Manage">
                <MudNavGroup Icon="@Icons.Material.Filled.SupervisedUserCircle" HideExpandIcon="true" Expanded="true">
                <TitleContent>
                     <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                   User
                    <MudIcon Icon="@Icons.Material.Filled.ArrowDropDown" Class="mb-2"></MudIcon>
                    </div>
                </TitleContent>
                <ChildContent>
                     <PermissionView Permission="Users.Manage">
                        <MudNavLink Href="/admin/user" Icon="@Icons.Material.Filled.ManageAccounts" ActiveClass="custom-active">
                            User Manage
                        </MudNavLink>
                        </PermissionView>
                        <PermissionView Permission="Roles.Manage">
                        <MudNavLink Href="/admin/roles" Icon="@Icons.Material.Filled.AlignHorizontalLeft" ActiveClass="custom-active">
                       Roles
                    </MudNavLink>
                        </PermissionView>
                          <PermissionView Permission="Permission.Manage"> 
                        <MudNavLink Href="/admin/permissions" Icon="@Icons.Material.Filled.AlignHorizontalLeft" ActiveClass="custom-active">
                       Permissions
                    </MudNavLink>
                        </PermissionView>
                </ChildContent>
            </MudNavGroup>
                </PermissionView>
        </PermissionView>
            <PermissionView Permission="VirtualTour.Manage">
            <MudNavGroup Icon="@Icons.Material.Filled.Tour" HideExpandIcon="true" Expanded="false">
                <TitleContent>
                     <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                             Virtual Tour
                    <MudIcon Icon="@Icons.Material.Filled.ArrowDropDown" Class="mb-2"></MudIcon>
                    </div>
                </TitleContent>
                <ChildContent>
                    <MudNavLink ActiveClass="custom-active" Icon="@Icons.Material.Filled.Preview" Href="/admin/view">
               View
            </MudNavLink>

                    <MudNavLink ActiveClass="custom-active" Icon="@Icons.Material.Filled.PanoramaPhotosphere" Href="/admin/nodes">
                 Hotspot List
            </MudNavLink>
                       @*  <MudNavLink ActiveClass="custom-active" Icon="@Icons.Material.Filled.Map" Href="/admin/map">
                            Map
                        </MudNavLink> *@
                </ChildContent>
            </MudNavGroup>
            </PermissionView>
                 <PermissionView Permission="Position.Manage">
            <MudNavGroup Icon="@Icons.Material.Filled.Tour" HideExpandIcon="true" Expanded="false">
                <TitleContent>
                    <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                        Zone Manage
                        <MudIcon Icon="@Icons.Material.Filled.ArrowDropDown" Class="mb-2"></MudIcon>
                    </div>
                </TitleContent>
                <ChildContent>
                    <MudNavLink ActiveClass="custom-active" Icon="@Icons.Material.Filled.Preview" Href="/admin/sections">
                        Section
                    </MudNavLink>

                    <MudNavLink ActiveClass="custom-active" Icon="@Icons.Material.Filled.PanoramaPhotosphere" Href="/admin/floors">
                        Floor
                    </MudNavLink>
                    <MudNavLink ActiveClass="custom-active" Icon="@Icons.Material.Filled.Map" Href="/admin/areas">
                        Area
                    </MudNavLink>
                    <MudNavLink ActiveClass="custom-active" Icon="@Icons.Material.Filled.Map" Href="/admin/depts">
                        Department
                    </MudNavLink>
                </ChildContent>
            </MudNavGroup>
            </PermissionView>
    </MudNavMenu>
        <div style="margin-top: auto; text-align: center; color: #c2c7d0; font-size: 0.9rem; padding: 10px;">
            Version 1.0 <br /> Updated 4/7/2025
        </div>
    </div>
</MudPaper>
@code
{
    private async Task NavigateToHome()
    {
        await JS.InvokeVoidAsync("open", "/", "_blank");
    }
}
